var authentication_service;!function(){var e,t,n={4611:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},i=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n(1396),a=n(6222);t.default=function(e,t){return r(i,void 0,void 0,(function(){var n,i=this;return o(this,(function(c){switch(c.label){case 0:return[4,fetch(e)];case 1:return[4,c.sent().json()];case 2:return(n=c.sent()).assets.js.length>0&&n.assets.js.forEach((function(e){return r(i,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,s.default(e.url,document.body)];case 1:return t.sent(),[2]}}))}))})),n.assets.css.length>0&&n.assets.css.forEach((function(e){return r(i,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,a.default(e.url,document.head)];case 1:return t.sent(),[2]}}))}))})),t&&t(),[2]}}))}))}},1396:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(n,r){var o=document.createElement("script");o.onload=function(){return n()},o.onerror=function(){return r()},o.async=!1,o.src=e,t.appendChild(o)}))}},6222:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(n,r){var o=document.createElement("link");o.rel="stylesheet",o.onload=function(){return n()},o.onerror=function(){return r()},o.href=e,t.appendChild(o)}))}},1340:function(e,t,n){"use strict";n(4611).default;var r=n(1396);n(6222),t.Xs=function(e){return r.default(e,document.body)}},5725:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventAggregationEventType=void 0,(t.EventAggregationEventType||(t.EventAggregationEventType={})).WEBSOCKET_SERVICE_READY="WebsocketServiceReady"},423:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8759:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6570:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketServiceReadyEvent=void 0;const r=n(5725);class o{constructor(e){this.eventAggregationService=e,this.eventType=o.EventType,this.timestamp=new Date}}t.WebsocketServiceReadyEvent=o,o.EventType=r.EventAggregationEventType.WEBSOCKET_SERVICE_READY},3385:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3400),t),o(n(423),t),o(n(8759),t),o(n(6570),t),o(n(5725),t)},3400:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8328:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3385),t),o(n(4285),t),o(n(3519),t)},3974:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3112:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SessionServiceEventType=void 0,(n=t.SessionServiceEventType||(t.SessionServiceEventType={})).SESSION_SERVICE_READY="SessionServiceReady",n.SESSION_CREATED="SessionCreated",n.SESSION_DESTROYED="SessionDestroyed"},3641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionCreatedEvent=void 0;const r=n(3112);class o{constructor(e){this.eventType=o.EventType,this.timestamp=new Date,this.session=e}}t.SessionCreatedEvent=o,o.EventType=r.SessionServiceEventType.SESSION_CREATED},3533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionDestroyedEvent=void 0;const r=n(3112);class o{constructor(){this.eventType=o.EventType,this.timestamp=new Date}}t.SessionDestroyedEvent=o,o.EventType=r.SessionServiceEventType.SESSION_DESTROYED},9927:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionServiceReadyEvent=void 0;const r=n(3112);class o{constructor(e){this.eventType=o.EventType,this.timestamp=new Date,this.sessionService=e}}t.SessionServiceReadyEvent=o,o.EventType=r.SessionServiceEventType.SESSION_SERVICE_READY},4285:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4024),t),o(n(8615),t),o(n(4256),t),o(n(9497),t),o(n(3974),t),o(n(5386),t),o(n(9927),t),o(n(3533),t),o(n(3641),t),o(n(3112),t)},4024:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5386:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4256:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8615:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9497:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2301:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9258:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WishlistServiceEventType=void 0,(t.WishlistServiceEventType||(t.WishlistServiceEventType={})).WISHLIST_SERVICE_READY="WishlistServiceReady"},6549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WishlistServiceReadyEvent=void 0;const r=n(9258);class o{constructor(e){this.wishlistService=e,this.eventType=o.EventType,this.timestamp=new Date}}t.WishlistServiceReadyEvent=o,o.EventType=r.WishlistServiceEventType.WISHLIST_SERVICE_READY},3519:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2301),t),o(n(6549),t)},3574:function(e,t,n){"use strict";var r;n.d(t,{$:function(){return r}}),function(e){e.THIRD_PARTY_REGISTRATION="third_party_login",e.DIRECT_REGISTRATION="direct_registration",e.LOGIN="login",e.FORGOT_PASSWORD="forgot_password"}(r||(r={}))},9306:function(e,t,n){"use strict";var r;n.d(t,{d:function(){return r}}),function(e){e.CONFIRM_FORGOT_PASSWORD="ConfirmForgotPassword",e.CHANGE_PASSWORD="ChangePassword"}(r||(r={}))},6520:function(e,t,n){"use strict";var r;n.d(t,{m:function(){return r}}),function(e){e.MAIN="Main",e.MAIN_YOLO="MainYolo",e.PROFILE_QUESTIONNAIRES="ProfileQuestionnaires",e.EXCLUSIVE_ACCESS="ExclusiveAccess",e.HEADER="Header",e.REVIEWS="Reviews",e.OPENID="OpenId",e.ATP_INCENTIVE="ATPIncentive"}(r||(r={}))},2792:function(e,t,n){"use strict";var r;n.d(t,{M:function(){return r}}),function(e){e.MASTERS="master",e.BACHELORS="bachelor",e.PHD="phd",e.SHORT_COURSES="short",e.DISTANCE_LEARNING="distance_learning",e.PREPARATION_COURSES="preparation_courses",e.ADMISSION_TEST="admission_test"}(r||(r={}))},7632:function(e,t,n){"use strict";var r;n.d(t,{O:function(){return r}}),function(e){e.HEADER="Header",e.EXCLUSIVE_ACCESS="ExclusiveAccessV2",e.EXCLUSIVE_ACCESS_HEADER="ExclusiveAccessV2Header",e.PERSONALITY_TEST="PersonalityTest",e.PERSONALITY_TEST_OLD="PersonalityTest_old",e.COUNTRY_TEST="CountryTest",e.COUNTRY_TEST_OLD="CountryTest_old",e.PERSONAL_UPDATES="PersonalUpdates",e.SP_SCHOLARSHIP="SpScholarship",e.PROFILE_QUESTIONNAIRES="ProfileQuestionnaires",e.PROFILE_QUESTIONNAIRES_POPUP="ProfileQuestionnairesPopup",e.WISHLIST="FavouriteStudy",e.REVIEWS="Reviews",e.REVIEWS_POPUP="ReviewsPopup",e.RECOMMENDATIONS="Recommendations",e.RECOMMENDATIONS_POPUP="RecommendationsPopup",e.GLOBAL_STUDY_AWARDS="GlobalStudyAwards",e.ACCOUNT="Account",e.OTHER="Other",e.COMPARISON_TOOL="ComparisonTool",e.EXPERIMENT="Experiment",e.GOOGLE_YOLO="GoogleYolo",e.ONBOARDING_QUESTIONNAIRE="OnboardingQuestionnaire",e.TEST_USER="test-user",e.FORM="form",e.FREE_TEST_MATERIAL="FreeTestMaterial",e.SCHOLARSHIP_TAB="ScholarshipTab",e.SCHOLARSHIP_TAB_POPUP="ScholarshipTabPopup"}(r||(r={}))},6499:function(e,t,n){"use strict";n.d(t,{$W:function(){return c.$},ri:function(){return u},tw:function(){return o},ms:function(){return i.m},M6:function(){return s.M},OL:function(){return a.O},Rm:function(){return l}});class r extends CustomEvent{constructor(e,t,n){super("RenderAuthenticationService",{detail:{referrer:e,tabToShow:t,referrerDirect:n}})}}var o;!function(e){e.AUTHENTICATION_SERVICE_READY_EVENT="AuthenticationServiceReadyEvent",e.YOLO_NOT_DISPLAYED_EVENT="YoloNotDisplayedEvent"}(o||(o={}));var i=n(6520),s=n(2792),a=n(7632),c=(n(9306),n(3574));class u{constructor(e){this.authenticationServiceApplication=e,this.eventType=u.EventType,this.timestamp=new Date}}u.EventType=o.AUTHENTICATION_SERVICE_READY_EVENT;class l{constructor(){this.eventType=l.EventType,this.timestamp=new Date}}l.EventType=o.YOLO_NOT_DISPLAYED_EVENT},4491:function(e,t){"use strict";t.Z={REGISTER:"Register",SIGNIN:"SignIn",OPTIN:"OptIn",GENERAL:"General",BACK_TO_LOGIN_CLICK:"back_to_login - click",FORGOT_PASSWORD_CLICK:"forgot_password - click",GO_TO_LOGIN_CLICK:"go_to_login - click",GO_TO_REGISTER_CLICK:"go_to_register - click",PRIVACY_STATEMENT_CLICK:"privacy_statement - click",TERMS_AND_CONDITIONS_CLICK:"terms_and_conditions - click",SUBMIT_CLICK:"submit - click",TOGGLE_PASSWORD:"toggle_password",CONTINUE_WITH_EMAIL_CLICK:"continue_with_email - click",FACEBOOK_BUTTON_CLICK:"facebook_button - click",GOOGLE_BUTTON_CLICK:"google_button - click",LINKEDIN_BUTTON_CLICK:"linkedin_button - click",OPTIN_IMPRESSION:"optin - impression",INCENTIVE_IMPRESSION:"incentive - impression",AUTH_POPUP_DISMISSED:"auth_popup - dismissed"}},7361:function(e,t){"use strict";t.Z={PROFILE:"Profile"}},7600:function(e,t){"use strict";t.Z={AUTH_STARTED:"AuthStarted",AUTH_COMPLETED:"AuthCompleted",PASSWORD_RESET_STARTED:"PasswordResetStarted",PASSWORD_RESET_COMPLETED:"PasswordResetCompleted",OPTIN_STARTED:"OptInStarted",CLICKED_WHEN_PENDING:"ClickedWhenPending"}},9943:function(e,t,n){"use strict";var r;n.d(t,{l:function(){return r}}),function(e){e.GOOGLE="Google",e.FACEBOOK="Facebook",e.LINKEDIN="LinkedIn",e.DIRECT="Direct"}(r||(r={}))},7930:function(e,t,n){"use strict";var r;n.d(t,{$:function(){return r}}),function(e){e[e.CAPTCHA=0]="CAPTCHA",e[e.BYPASS=1]="BYPASS"}(r||(r={}))},7787:function(e,t,n){"use strict";var r;n.d(t,{t:function(){return r}}),function(e){e.STUDENT_REGISTERED="student_registered",e.EXISTING_STUDENT_LOGGED_IN="logging_in_existing_user",e.STUDENT_LOGGED_IN="student_logged_in",e.OPT_IN_SUCCESS="opt_in_success",e.OPT_IN_FAIL="opt_in_fail",e.OPT_OUT="opt_out",e.AUTHENTICATION_COMPLETED="authentication_completed",e.AUTH_POPUP_DISMISSED="auth_popup_dismissed",e.YOLO_POPUP_DISMISSED="yolo_popup_dismissed",e.OPENID_PERMISSIONS_TRIGGERED="openId_persmissions_triggered"}(r||(r={}))},6073:function(e,t,n){"use strict";var r;n.d(t,{p:function(){return r}}),function(e){e.YOLO_DISPLAYED="yoloDisplayed",e.YOLO_INITIALIZED="yoloInitialized",e.YOLO_DISMISSED="yoloDismissed",e.FACEBOOK_INITIALIZED="facebookInitialized",e.OPEN_ID_PERMISSIONS_DISMISSED="openIdPermissionsDismissed",e.OPEN_ID_PERMISSIONS_ACCEPTED="openIdPermissionsAccepted",e.YOLO_NOT_DISPLAYED="yoloNotDisplayed"}(r||(r={}))},7903:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return r}}),function(e){e.OPT_INT_POP_UP="OptInPopUp",e.AUTH_POP_UP="AuthPopUp"}(r||(r={}))},8673:function(e,t,n){"use strict";var r;n.d(t,{P:function(){return r}}),function(e){e[e.REGISTER=0]="REGISTER",e[e.LOGIN=1]="LOGIN",e[e.YOLO=2]="YOLO"}(r||(r={}))},8713:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});class r extends Error{constructor(){super("Attempt limit has been exceeded"),this.name="AttemptLimitExceededError"}}},1425:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});class r extends Error{constructor(){super("Incorrect old password given"),this.name="IncorrectOldPasswordError"}}},4854:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});class r extends Error{constructor(){super("Username already exists"),this.name="UsernameExistsError"}}},3552:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});class r extends Error{constructor(){super("Incorrect username or password given"),this.name="UsernameOrPasswordIncorrectError"}}},9516:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});class r{static broadcast(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))}}},5551:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(8328),o=n(7787),i=n(9516);class s{constructor(e){e?e.subscribeTo(r.SessionCreatedEvent.EventType,this,!0):this.notify()}notify(){i.q.broadcast(o.t.AUTHENTICATION_COMPLETED,{})}}},4804:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});class r extends Error{constructor(){super("SignIn provider popup has been closed by the user"),this.name="SignInProviderPopupClosed"}}},341:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});class r extends Error{constructor(e){super("Unknown provider error occurred"),this.cause=e,this.name="UnknownProviderError"}}},5345:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(341);class o extends r.g{constructor(e){super(e),this.name="UnknownFacebookError"}}},1738:function(e,t,n){"use strict";n.d(t,{W:function(){return o}});var r=n(4804);class o extends r.p{constructor(){super(),this.name="LinkedInPopupClosedError"}}},991:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});class r extends Error{constructor(){super("User refused to authorize the permissions to your application"),this.name="LinkedInUserCancelledAuthorize"}}},4738:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});class r extends Error{constructor(){super("User declined to log in the their linkedin account"),this.name="LinkedInUserCancelledLogin"}}},4762:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(341);class o extends r.g{constructor(e){super(e),this.name="UnknownLinkedInError"}}},2153:function(e,t,n){"use strict";var r;n.d(t,{J:function(){return r}}),function(e){e[e.REGISTERED=0]="REGISTERED",e[e.CONVERTED=1]="CONVERTED",e[e.LOGIN=2]="LOGIN"}(r||(r={}))},8358:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});class r extends Error{constructor(e){super("Unknown student api error occurred"),this.name="UnknownStudentApiSignInError",this.originalError=e}}},3459:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});class r extends Error{constructor(e){super("Validation exception occurred while contacting the student api"),this.errors=e,this.name="ValidationStudentApiError"}}},5239:function(e,t,n){"use strict";n.d(t,{J:function(){return a}});var r,o=n(2153),i=n(8358),s=n(3459);!function(e){e.EMAIL_EXISTS="EmailExists",e.NO_EMAIL="NoEmailFound",e.BAD_INPUT="BadInput",e.USER_NOT_FOUND="UserNotFound",e.COGNITO_PASSWORD_INCORRECT="CognitoPasswordIncorrect",e.USERNAME_EXISTS="UsernameExistsException",e.USER_NOT_FOUND_EXCEPTION="UserNotFoundException",e.CONFLICTING_IDENTITY="ConflictingIdentity"}(r||(r={}));class a{constructor(e){this._cognitoAPIClient=null,this.studentAPIBaseUrl=e}get cognitoAPIClient(){if(null===this._cognitoAPIClient){const e=Promise.all([n.e(447),n.e(603)]).then(n.bind(n,7603)).then((e=>new e.CognitoApiClient));this._cognitoAPIClient=e}return Promise.resolve(this._cognitoAPIClient)}async signIn(e,t){try{const n=await this.doRequest("/signIn","POST",{credentials:e,payload:t});return this.constructSignInResponse(n.body,n.status)}catch(e){const t=e;if(t.errors)throw new s.G(t.errors);throw new i.w(t)}}async login(e,t){const n=await this.cognitoAPIClient;return(await n.login(e,t)).IdToken}async register(e,t,n){return(await this.cognitoAPIClient).register(e,t,n)}async forgotPassword(e,t){const n=await this.cognitoAPIClient;await n.forgotPassword(e,t)}async changePassword(e,t,n){const r=await this.cognitoAPIClient;await r.changePassword(e,t,n)}async confirmForgotPassword(e,t,n){const r=await this.cognitoAPIClient;await r.confirmForgotPassword(e,t,n)}async updateData(e,t){try{await this.doAuthenticatedRequest("/data","PATCH",t,e)}catch(e){const t=e;if(t.code===r.BAD_INPUT)throw new s.G(t.errors);throw new i.w(t)}}async doAuthenticatedRequest(e,t,n,r){return this.doRequest(e,t,n,{Authorization:r})}async doRequest(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=await fetch(`${this.studentAPIBaseUrl}${e}`,{method:t,body:JSON.stringify(n),headers:r}),i=await o.json();if(!o.ok)throw i;return{body:i,status:o.status}}constructSignInResponse(e,t){return{credentials:{accessToken:e.accessToken,refreshToken:e.refreshToken},flow:this.getSignInFlowByResponseCode(t)}}getSignInFlowByResponseCode(e){switch(e){case 201:return o.J.REGISTERED;case 225:return o.J.CONVERTED;default:return o.J.LOGIN}}}},2692:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(4353);class o{get incentiveStore(){return null===this._incentiveStore&&(this._incentiveStore=(0,r.Z)()),this._incentiveStore}constructor(){this._incentiveStore=null}}},57:function(e,t,n){"use strict";n.d(t,{A:function(){return i}});var r=n(1549),o=n(4353);const i=e=>(e._incentiveStore=(0,r.inject)("incentiveStore",(0,o.Z)()),e)},4673:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}});var r=n(1549),o=n(7600),i=n(9943),s=n(7787),a=n(7903),c=n(6499),u=n(8673);class l extends Error{constructor(e){super("No email provided"),this.cause=e,this.name="NoEmailError"}}var d=n(3459),p=n(8358),h=n(4854),f=n(4738),v=n(991),g=n(4762),E=n(1738),m=n(341);class S extends m.g{constructor(e){super(e),this.name="UnknownGoogleError"}}var I=n(4804);class y extends I.p{constructor(){super(),this.name="GoogleProviderPopupClosedError"}}var P=n(5345);class w extends l{constructor(e){super(e),this.name="NoEmailFacebookError"}}var T=n(3552),_=n(8713),A=n(1425);class O{errorMessage(e){return e instanceof d.G||e instanceof p.w?"Something went wrong.":e instanceof T.y?"The email and password combination you entered is incorrect.":e instanceof A.y?"The old password you entered is incorrect.":e instanceof h.H?"An account with this email address already exists. Please try logging in instead.":e instanceof _.d?"Your account has been temporarily disabled due to too many attempts. Please try again later.":e instanceof f.E||e instanceof v.E||e instanceof g.n||e instanceof E.W?"Something went wrong connecting to LinkedIn. Give it another try!":e instanceof S||e instanceof y?"Something went wrong connecting to Google. Give it another try!":e instanceof P.l?"Something went wrong connecting to Facebook. Give it another try!":e instanceof w||e instanceof l?"Your Facebook account needs to have a verified email address":(I.p,"Something went wrong.")}}var C=n(5551),R=n(2153),k=n(6073),N=n(2539),b=n(4491),D=n(3821);class L extends D.w{constructor(e){super(null,null,null),this.action=b.Z.OPTIN,this.label=e}get trackingEvent(){return{category:this.category,action:this.action,label:this.label}}}class U extends D.w{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(e,t,n),this.portal=e,this.referrer=t,this.provider=n,this.additionalTags=r,this.action=b.Z.REGISTER}spanalyticsEvent(){const e=this.tags.concat(this.additionalTags);return{action:b.Z.GENERAL,label:this.action,tags:e}}}class M extends D.w{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(e,t,n),this.portal=e,this.referrer=t,this.provider=n,this.additionalTags=r,this.action=b.Z.SIGNIN}spanalyticsEvent(){const e=this.tags.concat(this.additionalTags);return{action:b.Z.GENERAL,label:this.action,tags:e}}}var Z=n(6407);const G={getAdditionalTags(e){const t=[];e.providerCustomAction===u.P.YOLO&&t.push("Yolo");const n=$.getters.affiliate();null!==n&&t.push(n);const r=$.getters.trafficSource();return r&&t.push(`TrafficSource:${r}`),t},trackAuthentication(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=new M($.getters.portalType(),t,$.getters.authProvider(),n);e===R.J.REGISTERED&&(r=new U($.getters.portalType(),t,$.getters.authProvider(),n)),N.Z.authenticationServiceTracking.track(r,!0,!0,!0)},trackOptIn(e){const t=new L(e);N.Z.authenticationServiceTracking.track(t,!0,!0,!0)},trackAction(e,t){N.Z.authenticationServiceTracking.track(new Z.X({action:b.Z.GENERAL,label:e},t),!0,!1,!0)},trackAuthPopupDismiss(e){N.Z.authenticationServiceTracking.track(new Z.X({action:b.Z.AUTH_POPUP_DISMISSED,label:`${e}:${$.getters.portalType}`},e))}};var B=G;const F={setActionState:e=>{e||(e=c.$W.THIRD_PARTY_REGISTRATION),$.mutations.setActionState(e),e===c.$W.FORGOT_PASSWORD&&$.mutations.resetPasswordEmailSend(!1),$.actions.resetErrorMessage(),N.Z.eventBus.emit("authPopupCalculatePadding")},setLayoutType:e=>{$.mutations.setLayout(e),e===c.ms.OPENID&&N.Z.eventBus.emit(k.p.YOLO_DISMISSED)},saveName:e=>{$.mutations.setName(e)},saveEmail:e=>{$.mutations.setEmail(e)},savePassword:e=>{$.mutations.setPassword(e)},saveOldPassword:e=>{$.mutations.setOldPassword(e)},saveConfirmPassword:e=>{$.mutations.setConfirmPassword(e)},savePortalType:e=>{$.mutations.setPortalType(e)},saveAffiliate:e=>{$.mutations.setAffiliate(e)},saveTrafficSource:e=>{$.mutations.setTrafficSource(e)},saveCaptcha:e=>{$.mutations.setCaptcha(e)},setPending:(e,t)=>{$.mutations.setPending(e,t)},setRunningExperiment:e=>{$.mutations.setRunningExperiment(e)},acceptOptIn:async e=>{N.Z.eventBus.emit("closePopup","OptInPopUp"),await N.Z.studentAuthenticationService.subscribeForEmails(e),B.trackOptIn("Yes"),document.dispatchEvent(new Event(s.t.OPT_IN_SUCCESS))},denyOptIn:()=>{N.Z.eventBus.emit("closePopup","OptInPopUp"),B.trackOptIn("No"),document.dispatchEvent(new Event(s.t.OPT_OUT))},dismissOptIn:()=>{B.trackOptIn("Dismiss"),document.dispatchEvent(new Event(s.t.OPT_IN_FAIL)),new C.P(window.EventAggregationService)},dismissAuthPopup:e=>{B.trackAuthPopupDismiss(e),document.dispatchEvent(new Event(s.t.AUTH_POPUP_DISMISSED))},authenticate:async function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{B.trackAction(o.Z.AUTH_STARTED,t),$.actions.resetErrorMessage(),$.actions.setPending(!0,e.providerType),$.mutations.setAuthProvider(e.providerType);const r=await N.Z.studentAuthenticationService.authenticate(e.providerType,t,e.providerCustomAction),i=r.flow,s=B.getAdditionalTags(e);N.Z.eventBus.emit("closePopup",a.Z.AUTH_POP_UP),i===R.J.REGISTERED&&($.mutations.setAccessToken(r.credentials.accessToken),B.trackAction(o.Z.OPTIN_STARTED,t),n&&N.Z.eventBus.emit("openPopup",{identifier:a.Z.OPT_INT_POP_UP,referrer:t,appIdentifier:"OPTIN"}),$.actions.broadcastRegistration(e.providerType)),B.trackAuthentication(i,t,s),B.trackAction(o.Z.AUTH_COMPLETED,t),$.actions.setPending(!1,e.providerType)}catch(n){$.actions.catchAuthError(n,e.providerType,t)}},register:async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if($.mutations.directAuthTriggered(),!$.getters.isValidName()||!$.getters.isValidEmail()||!$.getters.isValidPassword())return;const n={providerType:i.l.DIRECT,providerCustomAction:u.P.REGISTER};await $.actions.authenticate(n,e,t)},login:async e=>{if($.mutations.directAuthTriggered(),!$.getters.isValidEmail())return;const t={providerType:i.l.DIRECT,providerCustomAction:u.P.LOGIN};await $.actions.authenticate(t,e)},startFacebookYoloAuthentication:async e=>{$.mutations.setFacebookAccessToken(e);const t={providerType:i.l.FACEBOOK,providerCustomAction:u.P.YOLO};await $.actions.authenticate(t,$.getters.referrerFacebookAuth()),$.mutations.setFacebookAccessToken(null)},startGoogleYoloAuthentication:async e=>{$.mutations.setGoogleIdToken(e);const t={providerType:i.l.GOOGLE,providerCustomAction:u.P.YOLO};await $.actions.authenticate(t,$.getters.referrerGoogleAuth()),$.mutations.setGoogleIdToken("")},resetErrorMessage:()=>{$.mutations.setErrorMessage(null,null)},setErrorMessage:(e,t)=>{const n=(new O).errorMessage(e);$.mutations.setErrorMessage(n,t)},setPasswordValid:e=>{$.mutations.setPasswordValid(e)},forgotPassword:async e=>{if($.getters.isValidEmail())try{B.trackAction(o.Z.PASSWORD_RESET_STARTED,e),$.actions.setPending(!0,i.l.DIRECT),await N.Z.studentAuthenticationService.forgotPassword(),$.actions.setPending(!1,i.l.DIRECT),$.actions.resetPasswordEmailSend(!0),B.trackAction(o.Z.PASSWORD_RESET_COMPLETED,e)}catch(t){$.actions.catchAuthError(t,i.l.DIRECT,e)}},confirmForgotPassword:async e=>{try{if($.actions.setPending(!0,i.l.DIRECT),$.actions.savePasswordResetParams(),await N.Z.studentAuthenticationService.confirmForgotPassword(),await $.actions.login(e),$.getters.userLoggedIn())return void $.actions.redirectToAccountPage();(0,r.watch)($.getters.userLoggedIn,(()=>{$.actions.redirectToAccountPage()}))}catch(t){$.actions.catchAuthError(t,i.l.DIRECT,e)}},changePassword:async e=>{try{$.actions.setPending(!0,i.l.DIRECT),await N.Z.studentAuthenticationService.changePassword(),$.actions.savePassword(""),$.actions.saveOldPassword(""),$.actions.saveConfirmPassword(""),$.actions.resetErrorMessage(),$.actions.setPending(!1,i.l.DIRECT),$.mutations.setShowSuccessMessage(!0),setTimeout((()=>{$.mutations.setShowSuccessMessage(!1)}),1e4)}catch(t){$.actions.catchAuthError(t,i.l.DIRECT,e)}},resetPasswordEmailSend:e=>{$.mutations.resetPasswordEmailSend(e)},setLoggedInState:async e=>{$.mutations.setLoggedInState(e),e||await N.Z.studentAuthenticationService.showYolo()},renderGoogleButton:(e,t)=>{N.Z.studentAuthenticationService.renderGoogleButton(e,t)},broadcastRegistration:e=>{document.dispatchEvent(new CustomEvent("student-registered",{detail:{provider:e}}))},showYolo:async()=>{$.getters.layout()!==c.ms.OPENID&&await N.Z.studentAuthenticationService.showYolo()},redirectToAccountPage:()=>{window.location.href="/account"},catchAuthError:(e,t,n)=>{N.Z.authenticationServiceTracking.trackError(e,n),$.actions.setPending(!1,t),$.actions.setErrorMessage(e,t),N.Z.eventBus.emit("resetCaptcha")},savePasswordResetParams:()=>{var e,t;const n=window.location.search,r=new URLSearchParams(n),o=atob(null!==(e=r.get("username"))&&void 0!==e?e:""),i=null!==(t=r.get("resetToken"))&&void 0!==t?t:"";$.actions.saveEmail(o),$.mutations.setResetToken(i)},trackImpression:e=>{const t=$.getters.portalType();N.Z.authenticationServiceTracking.track(new Z.X({action:b.Z.INCENTIVE_IMPRESSION,label:`${e}:${t}`},e))}};var x=F,V=n(2792),Y={actionState:()=>$.state.actionState,layout:()=>$.state.layout,name:()=>$.state.name,email:()=>$.state.email,password:()=>$.state.password,oldPassword:()=>$.state.oldPassword,confirmPassword:()=>$.state.confirmPassword,errorMessage:()=>$.state.errorMessage,showSuccessMessage:()=>$.state.showSuccessMessage,directAuthTriggered:()=>$.state.directAuthTriggered,isValidPassword:()=>$.state.isValidPassword,portalType:()=>{if($.state.portalType)return $.state.portalType;const e=window.location.host;let t=null;switch(!0){case-1!==e.indexOf("mastersportal.com")||-1!==e.indexOf("mastersportal.fyi"):t=V.M.MASTERS;break;case-1!==e.indexOf("bachelorsportal.com")||-1!==e.indexOf("bachelorsportal.fyi"):t=V.M.BACHELORS;break;case-1!==e.indexOf("phdportal.com")||-1!==e.indexOf("phdportal.fyi"):t=V.M.PHD;break;case-1!==e.indexOf("distancelearningportal.com")||-1!==e.indexOf("distancelearningportal.fyi"):t=V.M.DISTANCE_LEARNING;break;case-1!==e.indexOf("shortcoursesportal.com")||-1!==e.indexOf("shortcoursesportal.fyi"):t=V.M.SHORT_COURSES;break;case-1!==e.indexOf("preparationcoursesportal.com")||-1!==e.indexOf("preparationcoursesportal.fyi"):t=V.M.PREPARATION_COURSES;break;case-1!==e.indexOf("admissiontestportal.com"):t=V.M.ADMISSION_TEST}return t},authProvider:()=>$.state.authProvider,affiliate:()=>$.state.affiliate,trafficSource:()=>$.state.trafficSource,googleIdToken:()=>$.state.googleIdToken,facebookAccessToken:()=>$.state.facebookAccessToken,captcha:()=>$.state.captcha,isPending:e=>$.state.pending.authProvider===e&&$.state.pending.isPending,accessToken:()=>$.state.accessToken,resetPasswordEmailSend:()=>$.state.resetPasswordEmailSend,isValidName:()=>!(!$.state.name||void 0===$.state.name),isValidEmail:()=>!(!$.state.email||void 0===$.state.email)&&/^([a-zA-Z0-9_\.\-\+%])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test($.state.email),runningExperiment:()=>$.state.runningExperiment,showEmailError:()=>null!==$.state.email&&!$.getters.isValidEmail()||!(!$.state.directAuthTriggered||$.getters.isValidEmail()),showNameError:()=>{var e;return null!==$.state.name&&!$.getters.isValidName()||!(!$.state.directAuthTriggered||null!==(e=$.getters)&&void 0!==e&&e.isValidName())},showPasswordError:()=>!(!$.state.password||$.getters.isValidPassword())||!(!$.state.directAuthTriggered||$.getters.isValidPassword()),userLoggedIn:()=>{var e;return null!==(e=$.state.userLoggedIn)&&void 0!==e&&e},resetToken:()=>$.state.resetToken,referrerGoogleAuth:()=>{if(null===$.state.referrerGoogleAuth)throw new Error("referrerGoogleAuth has not been set");return $.state.referrerGoogleAuth},referrerFacebookAuth:()=>{if(null===$.state.referrerFacebookAuth)throw new Error("referrerFacebookAuth has not been set");return $.state.referrerFacebookAuth}},H=n(3574),j=n(6520),W=(0,r.reactive)({actionState:H.$.THIRD_PARTY_REGISTRATION,layout:j.m.MAIN,name:null,email:null,password:null,oldPassword:null,confirmPassword:null,errorMessage:{message:"",type:null},showSuccessMessage:!1,directAuthTriggered:!1,isValidPassword:!1,portalType:null,authProvider:null,affiliate:null,trafficSource:null,pending:{isPending:!1,authProvider:null},resetPasswordEmailSend:!1,accessToken:null,userLoggedIn:null,googleIdToken:"",facebookAccessToken:null,captcha:null,runningExperiment:null,resetToken:null,referrerGoogleAuth:null,referrerFacebookAuth:null}),K={setActionState:e=>{W.actionState=e},setLayout:e=>{W.layout=e},setName:e=>{W.name=e},setEmail:e=>{W.email=e},setPassword:e=>{W.password=e},setOldPassword:e=>{W.oldPassword=e},setConfirmPassword:e=>{W.confirmPassword=e},setPortalType:e=>{W.portalType=e},setAuthProvider:e=>{W.authProvider=e},setAffiliate:e=>{W.affiliate=e},setTrafficSource:e=>{W.trafficSource=e},setPending:(e,t)=>{W.pending={isPending:e,authProvider:t}},setErrorMessage:(e,t)=>{W.errorMessage={message:e,type:t}},setShowSuccessMessage:e=>{W.showSuccessMessage=e},directAuthTriggered:()=>{W.directAuthTriggered=!0},setPasswordValid:e=>{W.isValidPassword=e},setAccessToken:e=>{W.accessToken=e},resetPasswordEmailSend:e=>{W.resetPasswordEmailSend=e},setLoggedInState:e=>{W.userLoggedIn=e},setGoogleIdToken:e=>{W.googleIdToken=e},setFacebookAccessToken:e=>{W.facebookAccessToken=e},setCaptcha:e=>{W.captcha=e},setRunningExperiment:e=>{W.runningExperiment=e},setResetToken:e=>{W.resetToken=e},setReferrerGoogleAuth:e=>{W.referrerGoogleAuth=e},setReferrerFacebookAuth:e=>{W.referrerFacebookAuth=e}},$={state:(0,r.readonly)(W),mutations:K,getters:Y,actions:x}},4353:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1549);class o{constructor(e){this.state=e}setReferrer(e){this.state.referrer=e}setReferrerDirect(e){this.state.referrerDirect=e}}class i{constructor(e){this.state=e}referrer(){return this.state.referrer}referrerDirect(){return this.state.referrerDirect}}class s{constructor(e,t){this.mutations=e,this.getters=t}saveReferrer(e){this.mutations.setReferrer(e)}saveReferrerDirect(e){e?this.mutations.setReferrerDirect(e):this.mutations.setReferrerDirect(null)}}const a=()=>{const e=(0,r.reactive)({referrer:null,referrerDirect:null}),t=new o(e),n=new i(e),a=new s(t,n);return{state:(0,r.readonly)(e),mutations:t,getters:n,actions:a}}},2539:function(e,t,n){"use strict";n.d(t,{Z:function(){return U}});var r=n(6073),o=n(5345);class i{constructor(e){this.appId=e,this.retrievalFacebookSDK=null}async initializeSDK(){return this.retrievalFacebookSDK||(await(e="//connect.facebook.net/en_US/sdk.js",new Promise(((t,n)=>{const r="$importModule$"+Math.random().toString(32).slice(2),o=document.createElement("script"),i=()=>{delete window[r],o.onerror=null,o.onload=null,o.remove(),URL.revokeObjectURL(o.src),o.src=""};o.defer="defer",o.type="module",o.onerror=()=>{n(new Error(`Failed to import: ${e}`)),i()},o.onload=()=>{t(window[r]),i()};const s=function(e){const t=document.createElement("a");return t.setAttribute("href",e),t.cloneNode(!1).href}(e),a=new Blob([`import * as m from "${s}"; window.${r} = m;`],{type:"text/javascript"});o.src=URL.createObjectURL(a),document.head.appendChild(o)}))),this.retrievalFacebookSDK=Promise.resolve(FB.init({appId:this.appId,autoLogAppEvents:!0,xfbml:!0,version:"v7.0"})),U.eventBus.emit(r.p.FACEBOOK_INITIALIZED)),this.retrievalFacebookSDK;var e}async login(){return await this.initializeSDK(),{code:await this.getAuthCode()}}getAuthCode(){return new Promise(((e,t)=>{FB.login((n=>{"connected"!==n.status?t(new o.l(n)):e(n.authResponse.accessToken)}),{scope:"email",return_scopes:!0})}))}}var s=n(1340),a=n(7632),c=n(4673);class u{constructor(e){this.clientId=e}async showYolo(){return await this.initializeSDK(),new Promise((e=>{this.initializeYolo(e),window.OpenIdFlow||google.accounts.id.prompt((e=>{"credential_returned"!==e.getDismissedReason()?e.isDisplayed()?U.eventBus.emit(r.p.YOLO_DISPLAYED):e.isNotDisplayed()||"opt_out_or_no_session"===e.getNotDisplayedReason()?U.eventBus.emit(r.p.YOLO_NOT_DISPLAYED):U.eventBus.emit(r.p.YOLO_DISMISSED):c.Z.mutations.setReferrerGoogleAuth(a.O.GOOGLE_YOLO)}))}))}renderGoogleButton(e,t){google.accounts.id.renderButton(e.element,{type:"Small"===e.template?"icon":"standard",shape:"Small"===e.template?"square":"rectangular",text:"signin_with",theme:"filled_blue",size:"large",width:this.getSiblingButtonWidth(e.element),logo_alignment:"left",locale:"en",click_listener:()=>{c.Z.mutations.setReferrerGoogleAuth(t)}})}getSiblingButtonWidth(e){var t,n;const r=null!==(t=null===(n=e.parentNode)||void 0===n?void 0:n.querySelector(".Provider"))&&void 0!==t?t:null;return r?Math.round(r.getBoundingClientRect().width):400}initializeYolo(e,t){google.accounts.id.initialize({client_id:this.clientId,callback:t=>e(t.credential),context:"signin",ux_mode:"popup",auto_select:!1,prompt_parent_id:t,cancel_on_tap_outside:!1,itp_support:!0}),U.eventBus.emit(r.p.YOLO_INITIALIZED)}async initializeSDK(){await(0,s.Xs)("https://accounts.google.com/gsi/client")}}var l,d=n(991),p=n(4738),h=n(4762);!function(e){e[e.LINKEDIN_POPUP_READY=0]="LINKEDIN_POPUP_READY",e[e.AUTHENTICATION_SERVICE_READY=1]="AUTHENTICATION_SERVICE_READY",e[e.LINKEDIN_USER_LOGGED_IN=2]="LINKEDIN_USER_LOGGED_IN",e[e.LINKEDIN_ERROR_OCCURRED=3]="LINKEDIN_ERROR_OCCURRED"}(l||(l={}));var f=n(1738);class v{constructor(e,t){this.linkedInClientId=e,this.linkedInRedirectUri=t,this.linkedInBaseUrl="https://www.linkedin.com/oauth/v2/authorization",this.linkedInWindow=null,this.linkedInCompleted=!1,this.window=window}async login(){return new Promise((async(e,t)=>{this.openPopup(),this.attachCloseHandler(t),await this.listenForLinkedInPopupReady(),this.sendAuthenticationServiceReadyEvent();try{e(await this.retrieveTokenFromLinkedInUserLoggedInEvent())}catch(e){t(e)}}))}constructUrl(){return`${this.linkedInBaseUrl}?client_id=${this.linkedInClientId}&redirect_uri=${this.linkedInRedirectUri}&scope=r_liteprofile,r_emailaddress&response_type=code`}openPopup(){const e=this.constructUrl();this.linkedInWindow=window.open(e,"MsgWindow","width=400,height=650")}attachCloseHandler(e){const t=setInterval((()=>{this.linkedInWindow.closed&&!this.linkedInCompleted&&(clearInterval(t),e(new f.W))}),100)}listenForLinkedInPopupReady(){return new Promise((e=>{const t=this.window.addEventListener("message",(n=>{n.data.type===l.LINKEDIN_POPUP_READY&&(this.removeListener(t),e())}))}))}retrieveTokenFromLinkedInUserLoggedInEvent(){return new Promise(((e,t)=>{const n=this.window.addEventListener("message",(r=>{r.data.type===l.LINKEDIN_USER_LOGGED_IN&&(this.removeListener(n),this.linkedInCompleted=!0,e(r.data.token)),r.data.type===l.LINKEDIN_ERROR_OCCURRED&&(this.removeListener(n),this.linkedInCompleted=!0,t(this.constructErrorFromEventData(r.data)))}))}))}constructErrorFromEventData(e){switch(e.error){case"user_cancelled_login":return new p.E;case"user_cancelled_authorize":return new d.E;default:return new h.n(e.error)}}sendAuthenticationServiceReadyEvent(){this.linkedInWindow.postMessage({type:l.AUTHENTICATION_SERVICE_READY},"*")}removeListener(e){this.window.removeEventListener("message",e)}}var g=n(2153),E=n(5239),m=n(9943),S=n(7787),I=n(8673);class y{constructor(e){this.studentAPIClient=e}async login(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.toLowerCase(),o=await this.studentAPIClient.login(r,t);return this.studentAPIClient.signIn({cognito:o},n)}async register(e,t,n,r){const o=e.toLowerCase();return await this.studentAPIClient.register(o,t,r),this.login(o,t,n)}async forgotPassword(e,t){await this.studentAPIClient.forgotPassword(e.toLowerCase(),t)}async confirmForgotPassword(e,t,n){await this.studentAPIClient.confirmForgotPassword(e,n,t)}async changePassword(e,t,n){const r=n.toLowerCase();await this.studentAPIClient.changePassword(r,e,t)}async updateData(e,t){await this.studentAPIClient.updateData(e,t)}}class P{constructor(e,t){this.facebookClient=e,this.studentAPIClient=t}async initialize(){return this.facebookClient.initializeSDK()}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=(await this.facebookClient.login()).code),await this.studentAPIClient.signIn({facebook:t},e)}}class w{constructor(e,t){this.googleClient=e,this.studentAPIClient=t}async initialize(){return this.googleClient.initializeSDK()}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return await this.studentAPIClient.signIn({google:t},e)}async showYolo(){return this.googleClient.showYolo()}renderGoogleButton(e,t){this.googleClient.renderGoogleButton(e,t)}}class T{constructor(e,t){this.linkedInClient=e,this.studentAPIClient=t}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await this.linkedInClient.login();return await this.studentAPIClient.signIn({linkedin:t},e)}}var _=n(9516),A=n(9123),O=n(5551),C=n(6499);class R{constructor(e){this.config=e}async track(e){e.url=this.getUri(),e=Object.assign(e,this.config),await this.sendRequest(this.getRequestOptions(e))}getUri(){return window.location.toString()}sendRequest(e){return fetch(e.url,{method:e.method,body:e.body,headers:{"Content-Type":"application/json"}}).then((e=>e.json()))}getRequestOptions(e){return{url:"https://c6coiy9r7a.execute-api.eu-west-1.amazonaws.com/prd/events",method:"PUT",body:JSON.stringify(e)}}}var k=n(7361),N=n(4491);const b=new class{constructor(){this.spTracker=new R({environment:"prd",team:"xm",product:"AuthService",category:k.Z.PROFILE})}track(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.snowplow(e),t&&this.GA(e),n&&this.spAnalytics(e)}trackError(e,t){const n=e.constructor.name;this.isUnknownError(n)&&this.rollbar(e),this.spTracker.track({action:N.Z.GENERAL,label:n,tags:[c.Z.getters.authProvider,c.Z.getters.portalType,t]})}isUnknownError(e){return["UnknownStudentApiSignInError","UnknownLinkedInError","UnknownGoogleError","UnknownFacebookError"].indexOf(e)>-1}rollbar(e){if(void 0===window.rollbar)return null;window.rollbar.error(e)}snowplow(e){if(void 0===window.snowplow)return null;const t=e.get("redshift");window.snowplow("trackStructEvent",{category:t.category,action:t.action,label:t.label||"",property:t.property||"",value:t.value||0})}GA(e){return void 0===window.Shared||void 0===window.Shared.GA?null:void window.Shared.GA.fireTracker(e.get("ga"))}spAnalytics(e){this.spTracker.track(e.get("spanalytics"))}},D=new class{constructor(){const e=new E.J("https://studentapi.prtl.co"),t=new u("1064731348760-6b451k3ij3nif4a9bfislhs2p1lkbg05.apps.googleusercontent.com"),n=new i("191936798019328"),r=new v("77lqhmusoanrao","https://auth.prtl.co/linkedin.html");this.googleProvider=new w(t,e),this.facebookProvider=new P(n,e),this.linkedinProvider=new T(r,e),this.directProvider=new y(e)}async authenticate(e,t,n){const r=await this.authenticateWithProvider(e,t,n);return this.broadcastEvents(r),r}async forgotPassword(){var e;await this.directProvider.forgotPassword((null===(e=c.Z.getters.email())||void 0===e?void 0:e.toLowerCase())||"",c.Z.getters.portalType()||C.M6.MASTERS)}async confirmForgotPassword(){const e=c.Z.getters.email()||"",t=c.Z.getters.resetToken()||"",n=c.Z.getters.password()||"";await this.directProvider.confirmForgotPassword(e,n,t)}async changePassword(){const e=c.Z.getters.oldPassword()||"",t=c.Z.getters.password()||"",n=await U.sessionService.getSession();if(n){const r=n.getUser().email;await this.directProvider.changePassword(e,t,r)}}async subscribeForEmails(e){void 0!==e?await this.directProvider.updateData(c.Z.getters.accessToken()||"",e):await this.directProvider.updateData(c.Z.getters.accessToken()||"",{emailing_other:!0,emailing_favourites:!0,emailing_scholarships:!0,emailing_updates:!0})}async showYolo(){try{U.eventBus.on(r.p.YOLO_DISMISSED,(()=>{_.q.broadcast(S.t.YOLO_POPUP_DISMISSED,null)}));const e=await this.googleProvider.showYolo();await c.Z.actions.startGoogleYoloAuthentication(e)}catch(e){}}renderGoogleButton(e,t){this.googleProvider.renderGoogleButton(e,t)}async initialize(){try{await this.googleProvider.initialize()}catch(e){}try{await this.facebookProvider.initialize()}catch(e){}}broadcastEvents(e){const t=e.credentials;e.flow===g.J.REGISTERED?_.q.broadcast(S.t.STUDENT_REGISTERED,t):(_.q.broadcast(S.t.EXISTING_STUDENT_LOGGED_IN,t),new O.P(window.EventAggregationService)),_.q.broadcast(S.t.STUDENT_LOGGED_IN,t)}authenticateWithProvider(e,t,n){const r=this.getPayload(t);switch(e){case m.l.FACEBOOK:return this.authenticateFacebook(r,n);case m.l.LINKEDIN:return this.linkedinProvider.login(r);case m.l.GOOGLE:return this.authenticateGoogle(r);case m.l.DIRECT:return this.authenticateDirect(r,n);default:throw new Error("AuthenticationProviderType not supported")}}authenticateFacebook(e,t){return t===I.P.YOLO?this.facebookProvider.login(e,c.Z.getters.facebookAccessToken()):this.facebookProvider.login(e)}authenticateGoogle(e){return this.googleProvider.login(e,c.Z.getters.googleIdToken())}async authenticateDirect(e,t){const n=c.Z.getters.email()||"",r=c.Z.getters.password()||"";if(t===I.P.LOGIN)return this.directProvider.login(n,r,e);if(t===I.P.REGISTER){e=this.addNameToPayload(e);const t=c.Z.getters.captcha();return this.directProvider.register(n,r,e,t)}throw new Error("DirectAuthenticationType not supported")}getPayload(e){let t={referrer:e,registration_portal_type:c.Z.getters.portalType()};return t=this.addAffiliateToPayload(t),t=this.addTrafficSourceToPayload(t),void 0!==window.formEntity&&null!==window.formEntity.postValues&&(t=Object.assign(window.formEntity.postValues,t)),t}addNameToPayload(e){const t=c.Z.getters.name()||"",n=t.split(" ");return e.first_name=n.shift()||"",e.last_name=n.join(" "),e.name=t,e}addAffiliateToPayload(e){A.DataStorage.init();const t=A.DataStorage.retrieve("sp_affiliate");if(null!==t&&t.utm_source){if(t.utm_source.source){const n=t.utm_source.source.toString();e.affiliate=n,c.Z.actions.saveAffiliate(n)}t.utm_source.url&&(e.affiliate_url=t.utm_source.url.toString())}return e}addTrafficSourceToPayload(e){A.DataStorage.init();const t=A.DataStorage.retrieve("traffic_source");if(null!=t&&t.utm_source){if(t.utm_source.source){const n=t.utm_source.source.toString();e.traffic_source=n,c.Z.actions.saveTrafficSource(n)}t.utm_source.url&&(e.traffic_source_url=t.utm_source.url.toString())}return e}};var L,U={authenticationServiceTracking:b,studentAuthenticationService:D,sessionService:{},eventBus:{all:L=L||new Map,on:function(e,t){var n=L.get(e);n?n.push(t):L.set(e,[t])},off:function(e,t){var n=L.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):L.set(e,[]))},emit:function(e,t){var n=L.get(e);n&&n.slice().map((function(e){e(t)})),(n=L.get("*"))&&n.slice().map((function(n){n(e,t)}))}}}},6407:function(e,t,n){"use strict";n.d(t,{X:function(){return i}});var r=n(4673),o=n(3821);class i extends o.w{constructor(e,t){super(r.Z.getters.portalType(),t,r.Z.getters.authProvider()),this.action=e.action||"",this.label=e.label||"",this.property=e.property||"",this.value=e.value||null}get trackingEvent(){return{category:this.category,action:this.action,label:this.label,property:this.property,value:this.value}}}},3821:function(e,t,n){"use strict";n.d(t,{w:function(){return i}});var r=n(7361),o=n(4491);class i{constructor(e,t,n){this.portal=e,this.referrer=t,this.provider=n,this.category=r.Z.PROFILE,this.action=o.Z.GENERAL}get trackingEvent(){return{category:this.category,action:this.action,label:`${this.provider}:${this.referrer}`}}get tags(){const e=[];return null!==this.provider&&e.push(this.provider),null!==this.portal&&e.push(this.portal),null!==this.referrer&&e.push(this.referrer),e}get(e){switch(e){case"redshift":return this.redshiftEvent();case"ga":return this.gaEvent();case"spanalytics":return this.spanalyticsEvent();default:return null}}redshiftEvent(){return this.trackingEvent}gaEvent(){return this.trackingEvent}spanalyticsEvent(){return{action:this.action,label:this.label,tags:this.tags}}}},3744:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,r]of t)n[e]=r;return n}},9123:function(e,t,n){e.exports=n(4987)("./node_modules/@studyportals/data-storage/dist/index.js")},9675:function(e,t,n){e.exports=n(2581)("./node_modules/@studyportals/modal/modal.js")},1549:function(e,t,n){e.exports=n(4717)("v")},4987:function(e){"use strict";e.exports=dataStorage_v2},2581:function(e){"use strict";e.exports=modal_v3},4717:function(e){"use strict";e.exports=vue3_library_v5}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,o),i.exports}o.m=n,o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return e+"."+o.h()+".js"},o.miniCssF=function(e){return e+"."+o.h()+".css"},o.h=function(){return"0fbed11d877fd958af09"},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="authentication_service:",o.l=function(n,r,i,s){if(e[n])e[n].push(r);else{var a,c;if(void 0!==i)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+i),a.src=n),e[n]=[r];var p=function(t,r){a.onerror=a.onload=null,clearTimeout(h);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(r)})),t)return t(r)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),c&&document.head.appendChild(a)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="https://auth.prtl.co/dist/",function(){if("undefined"!=typeof document){var e={296:0};o.f.miniCss=function(t,n){e[t]?n.push(e[t]):0!==e[t]&&{57:1,189:1,244:1,309:1,523:1,589:1,676:1,883:1,951:1}[t]&&n.push(e[t]=function(e){return new Promise((function(t,n){var r=o.miniCssF(e),i=o.p+r;if(function(e,t){for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=(s=n[r]).getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(o===e||o===t))return s}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){var s;if((o=(s=i[r]).getAttribute("data-href"))===e||o===t)return s}}(r,i))return t();!function(e,t,n,r,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(n){if(i.onerror=i.onload=null,"load"===n.type)r();else{var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=s,c.request=a,i.parentNode.removeChild(i),o(c)}},i.href=t,document.head.appendChild(i)}(e,i,0,t,n)}))}(t).then((function(){e[t]=0}),(function(n){throw delete e[t],n})))}}}(),function(){var e={296:0};o.f.j=function(t,n){var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=i);var s=o.p+o.u(t),a=new Error;o.l(s,(function(n){if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",a.name="ChunkLoadError",a.type=i,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=function(t,n){var r,i,s=n[0],a=n[1],c=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);c&&c(o)}for(t&&t(n);u<s.length;u++)i=s[u],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkauthentication_service=self.webpackChunkauthentication_service||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var i={};!function(){"use strict";o.r(i),o.d(i,{default:function(){return re}});var e=o(1549),t=o(9306),n=o(4673);class r{constructor(n){this.formTypes=(0,e.computed)((()=>t.d)),this.form=n}mounted(){this.trackImpression()}trackImpression(){n.Z.actions.trackImpression(this.form)}}var s=(0,e.defineComponent)({components:{ConfirmForgotPassword:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(910),o.e(676)]).then(o.bind(o,757)))),ChangePasswordForm:(0,e.defineAsyncComponent)((()=>o.e(523).then(o.bind(o,7523))))},props:{form:{type:String}},setup:t=>{const n=new r(t.form);return(0,e.onMounted)(n.mounted.bind(n)),{form:n.form,formTypes:n.formTypes}}}),a=o(3744),c=(0,a.Z)(s,[["render",function(t,n,r,o,i,s){const a=(0,e.resolveComponent)("ConfirmForgotPassword"),c=(0,e.resolveComponent)("ChangePasswordForm");return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[t.form===t.formTypes.CONFIRM_FORGOT_PASSWORD?((0,e.openBlock)(),(0,e.createBlock)(a,{key:0})):(0,e.createCommentVNode)("v-if",!0),t.form===t.formTypes.CHANGE_PASSWORD?((0,e.openBlock)(),(0,e.createBlock)(c,{key:1})):(0,e.createCommentVNode)("v-if",!0)])}]]),u=o(9675),l=o(6499),d=o(7632);class p{constructor(e,t){this.logOutService=e,this.accountService=t}async logout(){return this.logOutService.logout()}async confirmForgotPassword(e,t){await this.accountService.confirmForgotPassword(e,t),setTimeout((()=>{this.logout()}),3e3)}async deleteAccount(){return this.accountService.deleteAccount()}async register(e,t,n,r){return this.accountService.register(e,t,null!=r?r:d.O.OTHER,n)}async login(e,t){return this.accountService.login(e,t,d.O.OTHER)}bypassCaptcha(e){this.accountService.bypassCaptcha(e)}renderIncentive(e){re.handleRenderIncentiveCommand(e)}renderForm(e){re.handleRenderFormCommand(e)}}var h=o(5239);class f extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"No session found"),this.name="SessionNotFoundException"}}var v=o(7930);class g{constructor(e){this.sessionService=e,this.studentApiClient=new h.J("https://studentapi.prtl.co")}async confirmForgotPassword(e,t){const n=await this.getSession(),r=n.getUser();await n.getAccessToken(),await this.studentApiClient.confirmForgotPassword(r.email,e,t)}async deleteAccount(){throw new Error("Not implemented yet")}async getSession(){const e=await this.sessionService.getSession();if(null===e)throw new f;return e}async register(e,t,r,o){o&&n.Z.actions.saveName(o),n.Z.actions.saveEmail(e),n.Z.actions.savePassword(t),n.Z.actions.setPasswordValid(!0),await n.Z.actions.register(r,!1)}async login(e,t,r){n.Z.actions.saveEmail(e),n.Z.actions.savePassword(t),await n.Z.actions.login(r)}bypassCaptcha(e){n.Z.actions.saveCaptcha({type:v.$.BYPASS,token:e})}}var E=o(8328);class m{constructor(e,t){this.sessionService=e,this.eventAggregationService=t,this.eventAggregationService.subscribeTo(E.SessionDestroyedEvent.EventType,this)}async logout(){const e=await this.sessionService.getSession();if(null===e)throw new f;await e.destroy()}notify(){const e=document.getElementById("signOutLink");if(this.isValidSignOutLink(e))return this.setLocation(e.dataset.href);this.setLocation(window.location.href)}setLocation(e){window.location.href=e,window.location.reload()}isValidSignOutLink(e){return e instanceof Element&&void 0!==e.dataset.href}}const S={key:1};var I=o(6520),y=o(7903),P=o(2539),w=o(2692);class T extends w.p{constructor(t,n,r,o,i,s){super(),this.layoutTypes=(0,e.computed)((()=>I.m)),this.popUpType=(0,e.computed)((()=>y.Z)),this.layout=t,this.referrer=n,this.tabToShow=r,this.portalType=o,this.mountInPopUp=i,this.appIdentifier=s}mounted(){this.mountInPopUp&&document.addEventListener("auth_layout_mounted",(e=>{e.detail.layout===this.layout&&e.detail.appIdentifier===this.appIdentifier&&P.Z.eventBus.emit("openPopup",{identifier:y.Z.AUTH_POP_UP,referrer:this.referrer,appIdentifier:this.appIdentifier})})),n.Z.actions.setActionState(this.tabToShow),n.Z.actions.setLayoutType(this.layout),n.Z.actions.savePortalType(this.portalType),this.incentiveStore.actions.saveReferrer(this.referrer),this.trackImpression(),this.listenForTabSwitch(),this.mountLayout()}mountLayout(){this.layout===I.m.MAIN||this.layout===I.m.MAIN_YOLO?(this.fireLayoutMountedEvent(I.m.MAIN),this.fireLayoutMountedEvent(I.m.MAIN_YOLO)):this.fireLayoutMountedEvent(this.layout)}fireLayoutMountedEvent(e){document.dispatchEvent(new CustomEvent("auth_layout_mounted",{detail:{layout:e,appIdentifier:this.appIdentifier}}))}trackImpression(){n.Z.actions.trackImpression(this.referrer)}listenForTabSwitch(){document.addEventListener("RenderAuthenticationService",(e=>{e.detail.referrer===this.referrer&&void 0!==typeof e.detail.tabToShow&&n.Z.actions.setActionState(e.detail.tabToShow)}))}}const _={ref:"popupContent"};var A=o(9943);class O extends w.p{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AuthPopUp",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Simple",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";super(),this.popupContent=(0,e.ref)(null),this.state=(0,e.reactive)({hidden:!0}),this.modal=null,this.isPending=(0,e.computed)((()=>n.Z.getters.isPending(A.l.GOOGLE)||n.Z.getters.isPending(A.l.FACEBOOK)||n.Z.getters.isPending(A.l.LINKEDIN)||n.Z.getters.isPending(A.l.DIRECT))),this.referrer=t,this.identifier=r,this.type=o,this.appIdentifier=i}created(){P.Z.eventBus.on("openPopup",(e=>{this.isAuthPopupAndInvalidReferrer(e)||this.isInvalidInstance(e)||this.openPopup()})),P.Z.eventBus.on("closePopup",(e=>{e===this.identifier&&this.closePopup()}))}mounted(){document.addEventListener("RenderAuthenticationService",(e=>{e.detail.referrer===this.referrer&&this.openPopup()})),this.initiatePopup()}initiatePopup(){if(null==this.popupContent.value)return;const e={cssClassName:this.identifier,destroyOnClose:!0,onClose:this.onCloseHandler.bind(this)};"Complex"!==this.type?this.modal=new u.SimpleModal(this.popupContent.value,e):this.modal=new u.ComplexModal(this.popupContent.value,e)}closePopup(){if(this.state.hidden=!0,null==this.modal)return;const e=this.modal.getState();"open"!==e&&"visible"!==e||window.ModalManager.close(this.modal)}openPopup(){this.state.hidden=!1,window.ModalManager.open(this.modal)}onCloseHandler(){if(this.identifier===y.Z.OPT_INT_POP_UP&&n.Z.actions.dismissOptIn(),this.identifier===y.Z.AUTH_POP_UP&&!this.isPending.value){const e=this.incentiveStore.getters.referrer();n.Z.actions.dismissAuthPopup(e)}this.state.hidden=!0}isAuthPopupAndInvalidReferrer(e){return e.identifier===y.Z.AUTH_POP_UP&&e.referrer!==this.referrer}isInvalidInstance(e){return e.identifier!==this.identifier||e.appIdentifier!==this.appIdentifier}}var C=o(57),R=(0,e.defineComponent)({props:{identifier:String,referrer:String,type:String,appIdentifier:String},setup:t=>{const n=(0,C.A)(new O(t.referrer,t.identifier,t.type,t.appIdentifier));return n.created(),(0,e.onMounted)(n.mounted.bind(n)),{state:n.state,popupContent:n.popupContent}}}),k=(0,a.Z)(R,[["render",function(t,n,r,o,i,s){return(0,e.openBlock)(),(0,e.createElementBlock)("div",_,[t.state.hidden?(0,e.createCommentVNode)("v-if",!0):(0,e.renderSlot)(t.$slots,"default",{key:0})],512)}]]),N=(0,e.defineComponent)({components:{PopUp:k,Main:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(583),o.e(910),o.e(962),o.e(309)]).then(o.bind(o,6336)))),ProfileQuestionnaires:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(583),o.e(589)]).then(o.bind(o,1353)))),ExclusiveAccess:(0,e.defineAsyncComponent)((()=>o.e(189).then(o.bind(o,2189)))),Header:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(583),o.e(910),o.e(962),o.e(951)]).then(o.bind(o,1418)))),Reviews:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(583),o.e(883)]).then(o.bind(o,2625)))),UnibuddyIncentive:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(583),o.e(910),o.e(962),o.e(244)]).then(o.bind(o,998)))),ConfirmForgotPassword:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(910),o.e(676)]).then(o.bind(o,757)))),ChangePasswordForm:(0,e.defineAsyncComponent)((()=>o.e(523).then(o.bind(o,7523)))),ATPIncentive:(0,e.defineAsyncComponent)((()=>Promise.all([o.e(583),o.e(910),o.e(962),o.e(57)]).then(o.bind(o,555))))},props:{layout:String,referrer:String,tab_to_show:String,portal_type:String,popup:Boolean,flowState:String,appIdentifier:String},setup:t=>{const n=(0,C.A)(new T(t.layout,t.referrer,t.tab_to_show,t.portal_type,t.popup,t.appIdentifier));return(0,e.onMounted)(n.mounted.bind(n)),{layout:n.layout,layoutTypes:n.layoutTypes,popUpType:n.popUpType,referrer:n.referrer,mountInPopUp:n.mountInPopUp,flowState:t.flowState}}}),b=(0,a.Z)(N,[["render",function(t,n,r,o,i,s){const a=(0,e.resolveComponent)("Main"),c=(0,e.resolveComponent)("ProfileQuestionnaires"),u=(0,e.resolveComponent)("ExclusiveAccess"),l=(0,e.resolveComponent)("Header"),d=(0,e.resolveComponent)("Reviews"),p=(0,e.resolveComponent)("UnibuddyIncentive"),h=(0,e.resolveComponent)("ATPIncentive"),f=(0,e.resolveComponent)("PopUp"),v=(0,e.resolveComponent)("ConfirmForgotPassword"),g=(0,e.resolveComponent)("ChangePasswordForm");return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[t.mountInPopUp?((0,e.openBlock)(),(0,e.createBlock)(f,{key:0,type:"Complex",identifier:t.popUpType.AUTH_POP_UP,referrer:t.referrer,appIdentifier:t.appIdentifier},{default:(0,e.withCtx)((()=>[t.layout===t.layoutTypes.MAIN||t.layout===t.layoutTypes.MAIN_YOLO?((0,e.openBlock)(),(0,e.createBlock)(a,{key:0})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.PROFILE_QUESTIONNAIRES?((0,e.openBlock)(),(0,e.createBlock)(c,{key:1})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.EXCLUSIVE_ACCESS?((0,e.openBlock)(),(0,e.createBlock)(u,{key:2})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.HEADER?((0,e.openBlock)(),(0,e.createBlock)(l,{key:3})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.REVIEWS?((0,e.openBlock)(),(0,e.createBlock)(d,{key:4})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.OPENID?((0,e.openBlock)(),(0,e.createBlock)(p,{key:5,currentState:t.flowState},null,8,["currentState"])):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.ATP_INCENTIVE?((0,e.openBlock)(),(0,e.createBlock)(h,{key:6})):(0,e.createCommentVNode)("v-if",!0)])),_:1},8,["identifier","referrer","appIdentifier"])):((0,e.openBlock)(),(0,e.createElementBlock)("div",S,[t.layout===t.layoutTypes.MAIN||t.layout===t.layoutTypes.MAIN_YOLO?((0,e.openBlock)(),(0,e.createBlock)(a,{key:0})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.PROFILE_QUESTIONNAIRES?((0,e.openBlock)(),(0,e.createBlock)(c,{key:1})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.EXCLUSIVE_ACCESS?((0,e.openBlock)(),(0,e.createBlock)(u,{key:2})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.HEADER?((0,e.openBlock)(),(0,e.createBlock)(l,{key:3})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.REVIEWS?((0,e.openBlock)(),(0,e.createBlock)(d,{key:4})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.OPENID?((0,e.openBlock)(),(0,e.createBlock)(p,{key:5,currentState:t.flowState},null,8,["currentState"])):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.CONFIRM_FORGOT_PASSWORD?((0,e.openBlock)(),(0,e.createBlock)(v,{key:6})):(0,e.createCommentVNode)("v-if",!0),t.layout===t.layoutTypes.CHANGE_PASSWORD?((0,e.openBlock)(),(0,e.createBlock)(g,{key:7})):(0,e.createCommentVNode)("v-if",!0)]))])}]]),D=o(3574);class L{get eventAggregationService(){return void 0===window.EventAggregationService?null:window.EventAggregationService}async notify(e){await this.onSessionServiceReady(e.sessionService)}initiate(){this.eventAggregationService&&(this.eventAggregationService.subscribeTo(E.SessionCreatedEvent.EventType,{notify:()=>{n.Z.mutations.setLoggedInState(!0)}},!0),this.eventAggregationService.subscribeTo(E.SessionServiceReadyEvent.EventType,this,!0))}async onSessionServiceReady(e){P.Z.sessionService=e,null===await e.getSession()?await n.Z.actions.setLoggedInState(!1):await n.Z.actions.setLoggedInState(!0)}}var U=o(6073);class M{initiate(){P.Z.eventBus.on(U.p.YOLO_DISPLAYED,(()=>{n.Z.actions.trackImpression(d.O.GOOGLE_YOLO)})),this.yoloNotDisplayedEventListener()}yoloNotDisplayedEventListener(){P.Z.eventBus.on(U.p.YOLO_NOT_DISPLAYED,(()=>{window.EventAggregationService.publishTo(l.Rm.EventType,new l.Rm)}))}}class Z{initiate(){P.Z.eventBus.on(U.p.FACEBOOK_INITIALIZED,(()=>this.addFacebookEventListener()))}addFacebookEventListener(){FB.Event.subscribe("auth.statusChange",(e=>this.handleFacebookStatusChange(e)))}async handleFacebookStatusChange(e){"connected"===e.status&&await n.Z.actions.startFacebookYoloAuthentication(e.authResponse.accessToken)}}var G=o(9123);class B{constructor(){this.experimentName="opt_in_optimisation"}initiate(){G.DataStorage.init();const e=G.DataStorage.retrieve(`Experiment/${this.experimentName}`);if(""===e)return;const t=(e=>{let{name:t,number:n}=e;return{name:t,variation:n}})(e);n.Z.actions.setRunningExperiment(t)}}const F=t=>((0,e.pushScopeId)("data-v-5c6940df"),t=t(),(0,e.popScopeId)(),t),x={id:"authOptIn"},V=F((()=>(0,e.createElementVNode)("header",{class:"OptInHeader"},[(0,e.createElementVNode)("h1",null,"Stay informed with emails"),(0,e.createElementVNode)("div",{class:"DiagonalDivider"}),(0,e.createElementVNode)("img",{class:"OptInLetterbox",src:"https://monet-prtl-co.imgix.net/Shared/Registration/illustration_ support_email.svg",alt:"Subscribe to our e-mails"})],-1))),Y={class:"ContentContainer"},H=F((()=>(0,e.createElementVNode)("p",null," Receive inside information in your inbox ",-1))),j=F((()=>(0,e.createElementVNode)("ul",{class:"OptInList"},[(0,e.createElementVNode)("li",null,"Recommended programmes for you"),(0,e.createElementVNode)("li",null,"Scholarship opportunities and partner offers"),(0,e.createElementVNode)("li",null,"Student reviews"),(0,e.createElementVNode)("li",null,"Latest news in higher education")],-1))),W={class:"ActionContainer"},K=F((()=>(0,e.createElementVNode)("i",{class:"lnr-cross"},null,-1))),$=F((()=>(0,e.createElementVNode)("i",{class:"lnr-check"},null,-1)));var z=o(6407),q=o(4491);class X extends w.p{mounted(){this.setOpenPopUpListener()}async accept(){await n.Z.actions.acceptOptIn()}notNow(){n.Z.actions.denyOptIn()}trackImpression(){const e=this.incentiveStore.getters.referrer();P.Z.authenticationServiceTracking.track(new z.X({action:q.Z.OPTIN_IMPRESSION,label:`${e}:${n.Z.getters.portalType()}`},e),!0,!0,!0)}setOpenPopUpListener(){P.Z.eventBus.on("openPopup",(e=>{this.incentiveStore.mutations.setReferrer(e.referrer),e.identifier===y.Z.OPT_INT_POP_UP&&this.trackImpression()}))}}var Q=(0,e.defineComponent)({components:{PopUp:k},props:{appIdentifier:String},setup:t=>{const n=(0,C.A)(new X);return(0,e.onMounted)(n.mounted.bind(n)),{notNow:n.notNow.bind(n),accept:n.accept.bind(n),trackImpression:n.trackImpression.bind(n),appIdentifier:t.appIdentifier}}});const J=(0,a.Z)(Q,[["render",function(t,n,r,o,i,s){const a=(0,e.resolveComponent)("PopUp");return(0,e.openBlock)(),(0,e.createElementBlock)("div",null,[(0,e.createVNode)(a,{identifier:"OptInPopUp",appIdentifier:t.appIdentifier},{default:(0,e.withCtx)((()=>[(0,e.createElementVNode)("div",x,[V,(0,e.createElementVNode)("div",Y,[H,j,(0,e.createElementVNode)("div",W,[(0,e.createElementVNode)("button",{onClick:n[0]||(n[0]=function(){return t.notNow&&t.notNow(...arguments)})},[(0,e.createTextVNode)("No "),K]),(0,e.createElementVNode)("button",{onClick:n[1]||(n[1]=function(){return t.accept&&t.accept(...arguments)}),class:"DriverButton"},[(0,e.createTextVNode)("Yes, sign me up "),$])])])])])),_:1},8,["appIdentifier"])])}],["__scopeId","data-v-5c6940df"]]);var ee=J,te=o(4353);const ne=new class{constructor(){this.mountedApps=new Map}initialize(){(new L).initiate(),(new M).initiate(),(new Z).initiate(),(new B).initiate(),this.constructModalManager(),this.optInPopup=(0,e.createApp)({render:()=>(0,e.h)(ee,{appIdentifier:"OPTIN"})}),this.createOptInPopUp(),o.g&&o.g.rollbar&&new o.g.rollbar({accessToken:"687421ee33854840a40b3d089c1e72a7",captureUncaught:!1,captureUnhandledRejections:!1,payload:{environment:"prd"}}),document.addEventListener("RenderAuthenticationService",(e=>{void 0!==e.detail&&this.handleRenderIncentiveCommand(e)})),this.createAuthenticationServiceApplication()}constructModalManager(){void 0===window.ModalManager&&(window.ModalManager=new u.ModalManager)}createOptInPopUp(){const e=document.createElement("div");e.classList.add("OptInPopUp"),document.body.appendChild(e),this.optInPopup.provide("incentiveStore",(0,te.Z)()),this.optInPopup.mount(e)}createAuthenticationServiceApplication(){if(!this.areSessionServiceAndEventAggregationServiceAvailable())return;const e=new m(window.SessionService,window.EventAggregationService),t=new g(window.SessionService),n=new p(e,t);window.AuthenticationService=n,window.EventAggregationService.publishTo(l.ri.EventType,new l.ri(n))}areSessionServiceAndEventAggregationServiceAvailable(){return void 0!==window.SessionService&&void 0!==window.EventAggregationService}handleRenderIncentiveCommand(e){this.renderIncentive(e.detail.referrer,e.detail.tabToShow,e.detail.referrerDirect)}handleRenderFormCommand(t){const n=document.querySelector(`.AuthFormPlaceholder[data-form-type=${t.type}]`);null!==n&&t.type===n.getAttribute("data-form-type")&&(0,e.createApp)({render:()=>(0,e.h)(c,{form:t.type})}).mount(n)}renderIncentive(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D.$.THIRD_PARTY_REGISTRATION,r=arguments.length>2?arguments[2]:void 0;const o=document.querySelector(`.AuthPlaceholder[data-referrer=${t}]`);if(null===o||t!==o.getAttribute("data-referrer"))return;const i=o.getAttribute("data-layout"),s=o.getAttribute("data-portal-type"),a=o.getAttribute("data-popup"),c=`${t}_${i}_${n}`,u=this.mountedApps.get(c);if(u)"true"==a&&P.Z.eventBus.emit("openPopup",{identifier:y.Z.AUTH_POP_UP,referrer:t,appIdentifier:c}),(this.isBestfitIncentive(t,i)||this.isReviewsIncentive(t,i))&&(u.unmount(),this.mountedApps.delete(c),this.renderIncentive(t,n));else{const u=(0,e.createApp)({render:()=>(0,e.h)(b,{layout:i,referrer:t,tab_to_show:n,portal_type:s,popup:"true"==a,appIdentifier:c})}),l=(0,te.Z)();l.actions.saveReferrer(t),l.actions.saveReferrerDirect(r),u.provide("incentiveStore",l),u.mount(o),this.mountedApps.set(c,u)}}isBestfitIncentive(e,t){return e===l.OL.PROFILE_QUESTIONNAIRES&&t===l.ms.PROFILE_QUESTIONNAIRES}isReviewsIncentive(e,t){return e===l.OL.REVIEWS&&t===l.ms.REVIEWS}};var re=ne;ne.initialize()}(),authentication_service=i}();
//# sourceMappingURL=bundle.0fbed11d877fd958af09.js.map